<!DOCTYPE html><html lang="ko" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Android Studio IDE와 Gradle · 안녕 프로그래밍</title><meta name="description" content="안녕 프로그래밍"><meta name="og:title" content="Android Studio IDE와 Gradle"><meta name="og:type" content="website"><meta name="og:url" content="https://www.holaxprogramming.com/2015/06/30/android-dev-environments/"><meta name="og:image" content="http://image.toast.com/aaaaahq/hola_cover.JPG"><meta name="og:description" content="안녕 프로그래밍"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/chiangmai.css"><meta name="steem:author" content="@stunstunstun"><meta name="fb:app_id" content="1258629384258634"><link rel="search" type="application/opensearchdescription+xml" href="https://www.holaxprogramming.com/atom.xml" title="안녕 프로그래밍"></head><body class="post"><div id="fb-root"></div><div class="wrap"><header><nav class="navi-post"><a class="navi-post-back" href="javascript:history.back()"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="navi-post-home" href="/"><i class="fa fa-home" aria-hidden="true"></i></a></nav></header><main class="post"><div class="post"><article class="post-block"><h1 class="post-title">Android Studio IDE와 Gradle</h1><div class="post-info"><div class="post-info-profile"><a href="https://github.com/stunstunstun" target="_blank"><img src="/image/profile.jpg"></a></div><div class="post-info-details"><div class="post-categories"><a href="/categories/android" target="_self"><span>ANDROID</span></a></div><div class="post-date">2015년 6월 30일</div></div></div><div class="post-share"><div class="fb-like" data-href="https://www.holaxprogramming.com/2015/06/30/android-dev-environments/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false">                 </div><div class="fb-share-button" data-href="https://www.holaxprogramming.com/2015/06/30/android-dev-environments/" data-layout="button" data-size="small" data-mobile-iframe="true"></div><div class="fb-follow" data-href="https://www.facebook.com/holaxprogramming/" data-layout="button_count" data-size="small" data-show-faces="true"></div></div><div class="post-content"><h2 id="Android-Studio-1-2-Release"><a href="#Android-Studio-1-2-Release" class="headerlink" title="Android Studio 1.2 Release"></a>Android Studio 1.2 Release</h2><ul>
<li>Android 는 개발도구로서 기존의 Eclipse + ADT 플러그인을 더이상 지원하지로 않기로 하고 인텔리J를 기반으로 한 Android Studio 를 개발도구로 지정한 상태이다. </li>
<li>Android Studio의 Beta / 1.0 Version의 경우 아직 개발환경을 교체할 정도의 경험은 느낄수 없다고 판단했지만 1.2 Version이 Release 되면서 Android Studio &amp; Gradle 기반의 개발환경으로의 교체를 검토하게 되었다.</li>
</ul>
<h2 id="Android-Studio-와-Gradle-이용한-개발-환경-구성"><a href="#Android-Studio-와-Gradle-이용한-개발-환경-구성" class="headerlink" title="Android Studio 와 Gradle 이용한 개발 환경 구성"></a>Android Studio 와 Gradle 이용한 개발 환경 구성</h2><ul>
<li>Eclipse 에서 Android Studio 로 개발환경을 이전한 이유로는 기존에 빌드 및 CI를 위해서 Gradle 을 이미 사용하고 있었고, Android Studio는 Gradle 프로젝트 관리를 위한 강력한 기능과 Eclipse에 비해 훨씬 놀라운 사용자 경험을 제공한다.</li>
<li>이와 같이 개발환경이 변경되면서 로컬개발 환경과 프로젝트의 CI와 QP측정을 위해서 빌드서버의 android 환경은 아래와 같이 구성을 하였다.</li>
</ul>
<h4 id="로컬개발환경"><a href="#로컬개발환경" class="headerlink" title="로컬개발환경"></a>로컬개발환경</h4><table>
<thead>
<tr>
<th>구분</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>JDK 1.7</td>
<td><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></td>
</tr>
<tr>
<td>Gradle</td>
<td>Version 2.2.1</td>
</tr>
<tr>
<td>Android SDK Platform Tools 22</td>
<td>- </td>
</tr>
<tr>
<td>Android SDK Platform 5.0.1</td>
<td>API Level 21</td>
</tr>
<tr>
<td>Android SDK Build-Tools</td>
<td>21.1.2</td>
</tr>
<tr>
<td>Android Studio IDE 1.2</td>
<td><a href="https://developer.android.com/sdk/index.html" target="_blank" rel="external">https://developer.android.com/sdk/index.html</a></td>
</tr>
</tbody>
</table>
<h4 id="Linux-CI-빌드서버"><a href="#Linux-CI-빌드서버" class="headerlink" title="Linux CI/빌드서버"></a>Linux CI/빌드서버</h4><table>
<thead>
<tr>
<th>구분</th>
<th>비고</th>
</tr>
</thead>
<tbody>
<tr>
<td>JDK</td>
<td>1.7    </td>
</tr>
<tr>
<td>Gradle</td>
<td>Gradle 2.2.1 Version을 Jenkins에 설치완료</td>
</tr>
<tr>
<td>Android SDK Platform Tools 22</td>
<td>-</td>
</tr>
<tr>
<td>Android SDK Platform 5.0.1 (API 21)</td>
<td>-    </td>
</tr>
<tr>
<td>Android SDK Build-Tools 21.1.2</td>
<td>-</td>
</tr>
<tr>
<td>Android Support Library</td>
<td>-</td>
</tr>
<tr>
<td>Android Support Repository</td>
<td>-    </td>
</tr>
</tbody>
</table>
<p><code>Linux 환경에서의 android 설치 및 Library 설치</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@root] android list sdk --all : 안드로이드의 사용가능 패키지 리스트 조회</span><br><span class="line">@root] android update sdk -u --all -- filter &lt;number, number&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Android-에서의-Gradle의-프로젝트-구조"><a href="#Android-에서의-Gradle의-프로젝트-구조" class="headerlink" title="Android 에서의 Gradle의 프로젝트 구조"></a>Android 에서의 Gradle의 프로젝트 구조</h2><p>Android Studio 의 Gradle 프로젝트의 구조는 프로젝트 하위에 각 모듈이 존재하는 구조입니다.</p>
<p><code>Examples</code></p>
<ul>
<li>toast-iap<ul>
<li>mobill-core</li>
<li>iap</li>
<li>iap-tstore</li>
<li>iap-naver</li>
<li>iap-sample</li>
</ul>
</li>
</ul>
<p><code>각 모듈의 구조는 아래와 같습니다</code></p>
<ul>
<li>build</li>
<li>libs</li>
<li>src/main<ul>
<li>java </li>
<li>res</li>
<li>AndroidManifes.xml</li>
</ul>
</li>
<li>build.gradle</li>
<li>gradle.properties</li>
</ul>
<p>이 문서에서는 Gradle 프로젝트에 대해서는 자세하게 다루지 않습니다, 아래의 Gradle Reference 참조하시면 좋습니다.</p>
<blockquote>
<p><a href="http://gradle.org/" target="_blank" rel="external">http://gradle.org/</a></p>
</blockquote>
<h2 id="Maven-Repository"><a href="#Maven-Repository" class="headerlink" title="Maven Repository"></a>Maven Repository</h2><p>Android Studio 는 Gradle 을 통해 Remote 로 라이브러리를 다운로드 할수 있습니다. <code>build.gradle</code> 파일에 아래와 같이 dependency만을 추가하면 특정 Library를 포함할 수 있습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile &apos;com.google.code.gson:gson:2.2.4&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이것이 Google에서 제공하는 gson이라는 Library를 사용하기 위한 전부입니다.</p>
<h2 id="애플리케이션의-실행-및-Flavor-설정"><a href="#애플리케이션의-실행-및-Flavor-설정" class="headerlink" title="애플리케이션의 실행 및 Flavor 설정"></a>애플리케이션의 실행 및 Flavor 설정</h2><p><code>rootProject의 setting.gradle</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include &apos;:iap-sample&apos;</span><br></pre></td></tr></table></figure>
<p><code>rootProject의 build.gradle</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">subprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">         jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>build.gradle</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile fileTree(dir: &apos;libs&apos;, includes: [&apos;**/*.jar&apos;])</span><br><span class="line">    compile group: &apos;com.android.support&apos;, name: &apos;support-v4&apos;, version: &apos;21.0.0&apos;</span><br><span class="line">    compile group: &apos;com.toast.iap&apos;, name: &apos;iap&apos;, version: &apos;1.2.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Workspace File encoding이 UTF-8로 되어 있는지 확인합니다.</p>
</blockquote>
<h4 id="로컬에-설치한-Android-SDK경로-지정"><a href="#로컬에-설치한-Android-SDK경로-지정" class="headerlink" title="로컬에 설치한 Android SDK경로 지정"></a>로컬에 설치한 Android SDK경로 지정</h4><p>local.properties 내부에 sdk.dir에 local에 설정된 Android SDK의 경로를 지정합니다.</p>
<h4 id="애플리케이션의-실행과-Flavor-설정"><a href="#애플리케이션의-실행과-Flavor-설정" class="headerlink" title="애플리케이션의 실행과 Flavor 설정"></a>애플리케이션의 실행과 Flavor 설정</h4><p>Android Studio IDE 에서는 아래와 같이 Build Variant 메뉴를 통해서 Flavor, BuildType을 지정할수 있습니다.</p>
<p><code>인앱결제를 Google Play로 빌드할 경우</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">googleRelease</span><br></pre></td></tr></table></figure>
<h4 id="Flavor-설정"><a href="#Flavor-설정" class="headerlink" title="Flavor 설정"></a>Flavor 설정</h4><p>Flavor 설정을 통해 빌드시에 아래와 같이 복수의 빌드타입을 생성할수가 있게 됩니다.</p>
<p><code>google 로 지정된 Flavor의 sourceSets</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/src/google/java</span><br><span class="line">/src/google/res</span><br><span class="line">/src/google/AndroidManifest.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    compileOptions.encoding = &quot;UTF-8&quot;</span><br><span class="line">    version = project.APP_VERSION</span><br><span class="line"> </span><br><span class="line">    compileSdkVersion Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)</span><br><span class="line">    buildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION</span><br><span class="line">    publishNonDefault true</span><br><span class="line"> </span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        minSdkVersion Integer.parseInt(project.ANDROID_BUILD_MIN_SDK_VERSION)</span><br><span class="line">        targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)</span><br><span class="line">        versionCode Integer.parseInt(project.APP_VERSION)</span><br><span class="line">        versionName project.APP_VERSION_NAME</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    lintOptions &#123;</span><br><span class="line">        abortOnError false</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        local &#123;</span><br><span class="line">            applicationId = &quot;com.nhnent.iap.test&quot;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        google &#123;</span><br><span class="line">            applicationId = &quot;com.nhnent.iap.google&quot;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        naver &#123;</span><br><span class="line">            applicationId = &quot;com.nhnent.iap.naver&quot;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        tstore &#123;</span><br><span class="line">            applicationId = &apos;com.nhnent.iap.tstore&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            storeFile file(STORE_FILE_NAME)</span><br><span class="line">            storePassword STORE_PASSWORD</span><br><span class="line">            keyAlias KEY_ALIAS</span><br><span class="line">            keyPassword KEY_PASSWORD</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            debuggable false</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            zipAlignEnabled true</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">        &#125;</span><br><span class="line">        debug &#123;</span><br><span class="line">            debuggable true</span><br><span class="line">            minifyEnabled false</span><br><span class="line">            zipAlignEnabled false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    sourceSets &#123;</span><br><span class="line">        main &#123;</span><br><span class="line">            jniLibs.srcDirs = [&apos;libs&apos;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2015/05/29/spring-boot-and-loaded/"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="next" href="/2015/07/29/android-deploy-to-jcenter/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><ins class="adsbygoogle adsense-bottom" style="display:block;" data-ad-client="ca-pub-6188640546219653" data-ad-slot="6129396565" data-ad-format="auto"></ins><div class="fb-comments-area"><div class="fb-comments" data-href="https://www.holaxprogramming.com/2015/06/30/android-dev-environments/" data-width="700" data-numposts="5"></div></div><div class="copyright"><p>© 2012 - 2022 <a href="https://github.com/stunstunstun" target="_blank">Minhyeok Jung</a>. Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/stunstunstun/hexo-theme-chiangmai" target="_blank">hexo-theme-chiangmai</a>.</p></div></footer></div><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><script>window.fbAsyncInit=function(){FB.init({appId:"1258629384258634",cookie:!0,xfbml:!0,version:"v2.8"}),FB.AppEvents.logPageView()},function(e,n,t){var o,c=e.getElementsByTagName(n)[0];e.getElementById(t)||((o=e.createElement(n)).id=t,o.src="//connect.facebook.net/en_US/sdk.js",c.parentNode.insertBefore(o,c))}(document,"script","facebook-jssdk");</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create','UA-97419941-1','auto');ga('send','pageview');</script></body></html>