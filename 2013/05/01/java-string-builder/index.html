<!DOCTYPE html><html lang="ko" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Mutable한 StringBuffer와 StringBuilder · 안녕 프로그래밍</title><meta name="description" content="안녕 프로그래밍"><meta name="og:title" content="Mutable한 StringBuffer와 StringBuilder"><meta name="og:type" content="website"><meta name="og:url" content="https://www.holaxprogramming.com/2013/05/01/java-string-builder/"><meta name="og:image" content="http://image.toast.com/aaaaahq/hola_cover.JPG"><meta name="og:description" content="안녕 프로그래밍"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/chiangmai.css"><meta name="steem:author" content="@stunstunstun"><meta name="fb:app_id" content="1258629384258634"><link rel="search" type="application/opensearchdescription+xml" href="https://www.holaxprogramming.com/atom.xml" title="안녕 프로그래밍"></head><body class="post"><div id="fb-root"></div><div class="wrap"><header><nav class="navi-post"><a class="navi-post-back" href="javascript:history.back()"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="navi-post-home" href="/"><i class="fa fa-home" aria-hidden="true"></i></a></nav></header><main class="post"><div class="post"><article class="post-block"><h1 class="post-title">Mutable한 StringBuffer와 StringBuilder</h1><div class="post-info"><div class="post-info-profile"><a href="https://github.com/stunstunstun" target="_blank"><img src="/image/profile.jpg"></a></div><div class="post-info-details"><div class="post-categories"><a href="/categories/java" target="_self"><span>JAVA</span></a></div><div class="post-date">2013년 5월 1일</div></div></div><div class="post-share"><div class="fb-like" data-href="https://www.holaxprogramming.com/2013/05/01/java-string-builder/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false">                 </div><div class="fb-share-button" data-href="https://www.holaxprogramming.com/2013/05/01/java-string-builder/" data-layout="button" data-size="small" data-mobile-iframe="true"></div><div class="fb-follow" data-href="https://www.facebook.com/holaxprogramming/" data-layout="button_count" data-size="small" data-show-faces="true"></div></div><div class="post-content"><p>String 클래스는 Immutable한 객체다. 불변이라는 뜻하는데 한번 생성된 객체는 그 값을 바꿀 수 없다는 의미로 해석하면 된다. 이 말은 String 클래스로 생성된 객체가 변경되면 기존의 String 객체는 더이상 참조하지 않고 새로운 String 객체가 생성된다는 의미이다.  </p>
<a id="more"></a>
<p>예를 들어 보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String caption = <span class="string">"캡션"</span>;</span><br><span class="line">String content = <span class="string">"컨텐츠"</span>;</span><br><span class="line"> </span><br><span class="line">System.out.println(<span class="string">"caption = "</span> + Integer.toHexString(caption.hashCode()));</span><br><span class="line">System.out.println(<span class="string">"content = "</span> + Integer.toHexString(content.hashCode()));</span><br><span class="line">System.out.println(<span class="string">"contentOthers = "</span> + Integer.toHexString(content.replace(content, <span class="string">"다른문장"</span>).hashCode()));</span><br></pre></td></tr></table></figure>
<p>Heap 영역의 참조 상태를 확인해 보자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">caption = 20ef99e6</span><br><span class="line">content = 38b73479</span><br><span class="line">contentOthers = e5b4853c</span><br></pre></td></tr></table></figure>
<p>위와 같이 String 객체인 content를 변경하게 되면 새로운 String 객체가 생성되는 것을 확인할 수 있다.</p>
<h2 id="StringBuffer와-StringBuilder"><a href="#StringBuffer와-StringBuilder" class="headerlink" title="StringBuffer와 StringBuilder"></a>StringBuffer와 StringBuilder</h2><p>아래와 같이 문자열 배열을 통해 모든 문자열을 합하여 출력하는 프로그램이 있다고 가장해보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String[] surnames = <span class="keyword">new</span> String[] &#123;<span class="string">"Kim"</span>, ..., <span class="string">"Jung"</span>&#125;;</span><br><span class="line">String notice = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> (String surnames : surnames) &#123;</span><br><span class="line">	notice += surnames + <span class="string">"\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(notice);</span><br></pre></td></tr></table></figure>
<p>notice로 선언된 변수에 객체 하나만 유지할 것 처럼 보이지만 반복문 하나당 2번의 새로운 String 객체가 생성되고 있는 상태이다. 만약에 문자열 배열의 크기가 엄청나게 크다면 성능에 큰 영향을 미칠지도 모른다.</p>
<p>이러한 String 클래스의 Immutable 한 특성을 보완하기 위해 Java에서는 문자열을 효율적으로 append 하기 위해 <code>StringBuffer</code> 클래스와 <code>StringBuilder</code> 클래스가 존재 한다. 이 두 클래스는 모두 문자열을 생성하고 변경하는데 용이 하다.</p>
<p>자세한 내용은 아래의 Java API Document를 참조 하면 된다.</p>
<p><code>StringBuilder</code></p>
<ul>
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html" target="_blank" rel="external">http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html</a></li>
</ul>
<p><code>StringBuffer</code></p>
<ul>
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html" target="_blank" rel="external">http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html</a> </li>
</ul>
<h4 id="Thread-safe-하지-않는-StringBuilder-클래스"><a href="#Thread-safe-하지-않는-StringBuilder-클래스" class="headerlink" title="Thread-safe 하지 않는 StringBuilder 클래스"></a>Thread-safe 하지 않는 StringBuilder 클래스</h4><p>두 클래스의 역할은 비슷하지만 중요한 차이점이 존재하는데 멀티 Thread 환경에서의 동작이다. StringBuffer 는 Thread-safe한 클래스이고, StringBuilder는 그렇지 못하다. 다수의 Thread 에서 StringBuilder 클래스로부터 생성된 객체에 접근 한다면 StringBuilder 대신에 반드시 StringBuffer로 대체해야 한다. 하지만 Thread-safe하게 설계된 StringBuffer가 성능이 좋지 못하기 때문에 개발시에 다양한 Thread가 애초에 접근하지 못하도록 하는 것이 가장 좋은 방법이다.</p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2013/04/27/android-architectures/"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="next" href="/2013/07/08/java-jvm-bytecode/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><ins class="adsbygoogle adsense-bottom" style="display:block;" data-ad-client="ca-pub-6188640546219653" data-ad-slot="6129396565" data-ad-format="auto"></ins><div class="fb-comments-area"><div class="fb-comments" data-href="https://www.holaxprogramming.com/2013/05/01/java-string-builder/" data-width="700" data-numposts="5"></div></div><div class="copyright"><p>© 2012 - 2022 <a href="https://github.com/stunstunstun" target="_blank">Minhyeok Jung</a>. Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/stunstunstun/hexo-theme-chiangmai" target="_blank">hexo-theme-chiangmai</a>.</p></div></footer></div><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><script>window.fbAsyncInit=function(){FB.init({appId:"1258629384258634",cookie:!0,xfbml:!0,version:"v2.8"}),FB.AppEvents.logPageView()},function(e,n,t){var o,c=e.getElementsByTagName(n)[0];e.getElementById(t)||((o=e.createElement(n)).id=t,o.src="//connect.facebook.net/en_US/sdk.js",c.parentNode.insertBefore(o,c))}(document,"script","facebook-jssdk");</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create','UA-97419941-1','auto');ga('send','pageview');</script></body></html>